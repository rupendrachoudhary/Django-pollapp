{% extends 'myapp/base.html' %}
{% load static %}

{% block title %}
Detail page
{% endblock %}

{% block css %}
<link rel="stylesheet" type="text/css" href="{% static 'myapp/style.css' %}">
{% endblock css %}

{% block content %}
{% if user.is_authenticated %}
<br><br>
<div class="container ">
<form action="{% url 'myapp:vote' pollquestion.id %}" method="post">
    <!-- Cross Site Request Forgery Protection -->
    {% csrf_token %}

    <div class="container">

         {% if error_message %}
              <p class="alert alert-danger"><strong>{{error_message}}</strong></p>
         {% endif %}
      
        <h3 class="">{{pollquestion.question}}</h3>
        <hr class="my-4">
        

        {% for choice in pollquestion.choices.all %}
            <div class="form-check">

               <input class="form-check-input  " type="radio" name="choice" id="choice{{forloop.counter}}"
                value="{{choice.id}}">
               <label class="form-check-label mx-1" for="choice{{forloop.counter}}">{{choice.answer}}</label>
            </div>
        {% endfor %}
            
        <hr class="my-4">
            <button class="btn btn-primary btn-sm" type="submit" value="vote">Vote</button>
            <a class="btn btn-warning btn-sm " href="{% url 'myapp:results' pollquestion.id %}">Results</a>

    </div>

</form>
    <br><br><br><br>
</div>
{% else %}
<br>
<div class="container">
  <p>You are not logged in</p>
    <p><a href="{% url 'login' %}">Log in</a></p>
</div>
<br><br><br><br><br><br><br><br>
{% endif %}
{% endblock %}
